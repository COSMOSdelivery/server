generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  UTILISATEUR
  ADMIN
  LIVREUR
}

enum ModePaiement {
  ESPECE
  CHEQUE
  ESPECE_ou_CHEQUE
}

enum EtatCommande {
  EN_ATTENTE
  AU_DEPOT
  EN_COURS
  A_VERIFIER
  LIVRES
  LIVRES_PAYES
  ECHANGE
  REMBOURSES
  RETOUR_DEFINITIF
  RETOUR_INTER_AGENCE
  RETOUR_EXPEDITEURS
  RETOUR_RECU_PAYES
}

model Utilisateur {
  id                Int        @id @default(autoincrement())
  nom               String
  prenom            String
  nomShop           String?
  email             String     @unique
  gouvernorat       String?
  password          String
  ville             String?
  localite          String?
  codePostal        String?
  adresse           String?
  telephone1        String
  telephone2        String?
  codeTVA           String?
  cin               String     @unique
  role              Role
  dateInscription   DateTime   @default(now())
  derniereMiseAJour DateTime   @updatedAt
  Commande          Commande[]
}

model Commande {
  code_a_barre           Int          @id @default(autoincrement())
  nom_Prenom_prioritaire String
  gouvernorat            String
  ville                  String
  localite               String
  codePostal             String
  adresse                String
  telephone1             String
  telephone2             String?
  designation            String
  prix                   Float
  nb_article             Int
  nb_colis               Int
  etat                   EtatCommande
  mode_paiement          ModePaiement
  possible_ouvrir        Boolean
  possible_echange       Boolean
  remarque               String?
  dateAjout              DateTime     @default(now())
  derniereMiseAJour      DateTime     @updatedAt
  id_client              Int
  utilisateur            Utilisateur  @relation(fields: [id_client], references: [id])
}
